# ==============================================================================
# JULES TRADING BOT - ENVIRONMENT VARIABLE CONFIGURATION
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to a new file named '.env' in the same directory.
# 2. Uncomment and set the values for the variables you want to override.
# 3. Variables set in this .env file will take precedence over the values
#    defined in 'config.ini'.
#
# HIERARCHY OF CONFIGURATION:
# 1. Environment Variables (e.g., set in your shell or Docker)
# 2. .env file (this file, when copied to .env)
# 3. config.ini file (the default values)
#
# NOTE: For multiple bots, you can create separate .env files (e.g., .env.my_second_bot)
# and specify which one to use by setting the BOT_NAME environment variable.
# For example: BOT_NAME=my_second_bot python run.py start
# The system will then look for an environment variable like 'MY_SECOND_BOT_ENV_FILE'
# to point to a specific .env file. If not found, it defaults to '.env'.

# ==============================================================================
# CORE BOT SETTINGS
# ==============================================================================
BOT_NAME=jules_bot
BOT_MODE=test
ENV_FILE=.env
JULES_BOT_SCRIPT_MODE=0
APP_SYMBOL=BTCUSDT
APP_FORCE_OFFLINE_MODE=false
APP_USE_TESTNET=true
APP_EQUITY_RECALCULATION_INTERVAL=300

# ==============================================================================
# DATABASE (POSTGRES) - CORRECT CREDENTIALS
# ==============================================================================
# These must match the values in your docker-compose.yml file
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=gcs_user
POSTGRES_PASSWORD=gcs_password
POSTGRES_DB=gcs_db

# ==============================================================================
# DEFAULT BINANCE API KEYS
# ==============================================================================
# These are used if a bot-specific key (defined below) is not found.
# Live Trading Account Keys
BINANCE_API_KEY=
BINANCE_API_SECRET=
# Testnet Account Keys
BINANCE_TESTNET_API_KEY=r8dROAuFR4oAytVwnWEUz7MttknphiCYy0c1N04lf3XDJZZJvti1v3XVXBWQcMGb
BINANCE_TESTNET_API_SECRET=YtSaVfBTq0un8Y0OKF0FXKAoCTg9HU1vbLYQfEiwXhsoKgARjHcaTpwF469PBef1

# ==============================================================================
# GENERAL APPLICATION SETTINGS
# ==============================================================================
APP_SYMBOL=BTCUSDT
APP_FORCE_OFFLINE_MODE=false
APP_USE_TESTNET=true
APP_EQUITY_RECALCULATION_INTERVAL=300

# ==============================================================================
# CORE TRADING STRATEGY RULES
# ==============================================================================
STRATEGY_RULES_COMMISSION_RATE=0.001
STRATEGY_RULES_SELL_FACTOR=1
STRATEGY_RULES_TARGET_PROFIT=0.0035
STRATEGY_RULES_MAX_CAPITAL_PER_TRADE_PERCENT=0.15
STRATEGY_RULES_BASE_USD_PER_TRADE=10
STRATEGY_RULES_MAX_OPEN_POSITIONS=150
STRATEGY_RULES_USE_DYNAMIC_CAPITAL=true
STRATEGY_RULES_WORKING_CAPITAL_PERCENTAGE=0.85
STRATEGY_RULES_USE_PERCENTAGE_BASED_SIZING=true
STRATEGY_RULES_ORDER_SIZE_FREE_CASH_PERCENTAGE=0.004
STRATEGY_RULES_USE_FORMULA_SIZING=true
STRATEGY_RULES_MIN_ORDER_PERCENTAGE=0.004
STRATEGY_RULES_MAX_ORDER_PERCENTAGE=0.02
STRATEGY_RULES_LOG_SCALING_FACTOR=0.002
STRATEGY_RULES_USE_REVERSAL_BUY_STRATEGY=true
STRATEGY_RULES_REVERSAL_BUY_THRESHOLD_PERCENT=0.005
STRATEGY_RULES_REVERSAL_MONITORING_TIMEOUT_SECONDS=100
STRATEGY_RULES_DIFFICULTY_ADJUSTMENT_FACTOR=0.005
STRATEGY_RULES_CONSECUTIVE_BUYS_THRESHOLD=5
STRATEGY_RULES_TRAILING_STOP_PROFIT=0.02
STRATEGY_RULES_DYNAMIC_TRAIL_PERCENTAGE=0.033
STRATEGY_RULES_DIFFICULTY_RESET_TIMEOUT_HOURS=2

# Dynamic Trailing Stop Parameters
STRATEGY_RULES_USE_DYNAMIC_TRAILING_STOP=true
# Defines the absolute minimum profit in USD that the trailing stop will attempt to lock in.
STRATEGY_RULES_TRAILING_STOP_MIN_PROFIT_USD=0.02
# The absolute drop in USD from the profit peak that will trigger a sell. If set > 0, it works alongside the percentage-based trail.
STRATEGY_RULES_TRAILING_STOP_DROP_USD=0.03
STRATEGY_RULES_DYNAMIC_TRAIL_MIN_PCT=0.01
STRATEGY_RULES_DYNAMIC_TRAIL_MAX_PCT=0.05
STRATEGY_RULES_DYNAMIC_TRAIL_PROFIT_SCALING=0.1

# Regime Fallback Parameters
# If true, the bot will use the last known valid regime if the current one is undefined.
STRATEGY_RULES_USE_REGIME_FALLBACK=true
# The time in seconds that the last known regime is considered valid for fallback.
STRATEGY_RULES_REGIME_FALLBACK_TTL_SECONDS=300

# ==============================================================================
# TRADING STRATEGY IDENTIFIERS
# ==============================================================================
TRADING_STRATEGY_NAME=default_strategy
TRADING_STRATEGY_MIN_TRADE_SIZE_USDT=10.0
TRADING_STRATEGY_MAX_TRADE_SIZE_USDT=1000.0

# ==============================================================================
# REGIME-SPECIFIC PARAMETERS
# ==============================================================================
# Regime 0: Low Volatility / Ranging Market (Conservative)
REGIME_0_TARGET_PROFIT=0.001
REGIME_0_BUY_DIP_PERCENTAGE=0.003
REGIME_0_SELL_RISE_PERCENTAGE=0.001
REGIME_0_ORDER_SIZE_USD=10

# Regime 1: Moderate Uptrend (Balanced)
REGIME_1_TARGET_PROFIT=0.008
REGIME_1_BUY_DIP_PERCENTAGE=0.003
REGIME_1_SELL_RISE_PERCENTAGE=0.008
REGIME_1_ORDER_SIZE_USD=10

# Regime 2: High Volatility / Strong Trend (Aggressive)
REGIME_2_TARGET_PROFIT=0.006
REGIME_2_BUY_DIP_PERCENTAGE=0.01
REGIME_2_SELL_RISE_PERCENTAGE=0.006
REGIME_2_ORDER_SIZE_USD=10

# Regime 3: Downtrend / Cautious (Very Conservative)
REGIME_3_TARGET_PROFIT=0.0025
REGIME_3_BUY_DIP_PERCENTAGE=0.007
REGIME_3_SELL_RISE_PERCENTAGE=0.0025
REGIME_3_ORDER_SIZE_USD=10

# ==============================================================================
# BACKTESTING SETTINGS
# ==============================================================================
BACKTEST_INITIAL_BALANCE=100
BACKTEST_COMMISSION_FEE=0.1
BACKTEST_DEFAULT_LOOKBACK_DAYS=30

# ==============================================================================
# DATA SETTINGS
# ==============================================================================
DATA_HISTORICAL_DATA_BUCKET=btc_data
DATA_PATHS_HISTORICAL_DATA_FILE=data/input/history/BTCUSDT-1m-data.csv
DATA_PATHS_MACRO_DATA_DIR=data/input/macro
DATA_PATHS_MODELS_DIR=data/models

# ==============================================================================
# DATA PIPELINE SETTINGS
# ==============================================================================
DATA_PIPELINE_FUTURE_PERIODS=60
DATA_PIPELINE_PROFIT_MULT=4.0
DATA_PIPELINE_STOP_MULT=1.5
DATA_PIPELINE_REGIME_FEATURES=["atr_14", "macd_diff_12_26_9", "rsi_14"]
DATA_PIPELINE_REGIME_ROLLING_WINDOW=72
DATA_PIPELINE_START_DATE_INGESTION=2023-01-01

# ==============================================================================
# API SETTINGS (If using the provided API)
# ==============================================================================
API_PORT=8765
API_MEASUREMENT=price_data
API_UPDATE_INTERVAL=5

# ==============================================================================
# BOT-SPECIFIC OVERRIDES
# ==============================================================================
# When running with BOT_NAME=gcs-bot, the system will look for GCS-BOT_... keys.
# NOTE: Hyphens in bot names (like gcs-bot) are kept.

# --- BOT: testbot ---
TESTBOT_BINANCE_TESTNET_API_KEY=r8dROAuFR4oAytVwnWEUz7MttknphiCYy0c1N04lf3XDJZZJvti1v3XVXBWQcMGb
TESTBOT_BINANCE_TESTNET_API_SECRET=YtSaVfBTq0un8Y0OKF0FXKAoCTg9HU1vbLYQfEiwXhsoKgARjHcaTpwF469PBef1

# --- BOT: gcs-bot ---
GCS_BOT_BINANCE_API_KEY=SUA_API_KEY_REAL
GCS_BOT_BINANCE_API_SECRET=SEU_API_SECRET_REAL
GCS_BOT_BINANCE_TESTNET_API_KEY=r8dROAuFR4oAytVwnWEUz7MttknphiCYy0c1N04lf3XDJZZJvti1v3XVXBWQcMGb
GCS_BOT_BINANCE_TESTNET_API_SECRET=YtSaVfBTq0un8Y0OKF0FXKAoCTg9HU1vbLYQfEiwXhsoKgARjHcaTpwF469PBef1

# --- BOT: marcos-bot ---
MARCOS_BOT_BINANCE_API_KEY=SUA_API_KEY_REAL
MARCOS_BOT_BINANCE_API_SECRET=SEU_API_SECRET_REAL
MARCOS_BOT_BINANCE_TESTNET_API_KEY=nRYX6Ozxy3iw2eZs1iqEu1Z8WJQ4eUzmO2SzDyoA7oO020CtJeDUlhPrMVpcFhaK
MARCOS_BOT_BINANCE_TESTNET_API_SECRET=0kzxltlErUut9C5InFMeRJyEVM1AtnaOa2JlmOLqwQ6a4819vyPH8HGFEFYbflmF

# --- BOT: gpt-bot ---
GPT_BOT_BINANCE_API_KEY=SUA_API_KEY_REAL
GPT_BOT_BINANCE_API_SECRET=SEU_API_SECRET_REAL
GPT_BOT_BINANCE_TESTNET_API_KEY=4Z1qMpqTvcl7F56NgFPeacPqp3mCveg4Y2ShqrPx4gWsZQl3zM2M725hVPs4FKyY
GPT_BOT_BINANCE_TESTNET_API_SECRET=FhbBScsnoBcotB21DAkMI1KgS2zPJv9cMf9Ov8396iIak64xKRYpvwq9E1NoFdNq
