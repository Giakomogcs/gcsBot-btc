[POSTGRES]
host=@env/POSTGRES_HOST
port=5432
user=gcs_user
password=gcs_password
dbname=gcs_db

[BINANCE_LIVE]
api_key = @env/BINANCE_API_KEY
api_secret = @env/BINANCE_API_SECRET

[BINANCE_TESTNET]
api_key = @env/BINANCE_TESTNET_API_KEY
api_secret = @env/BINANCE_TESTNET_API_SECRET

[STRATEGY_RULES]
commission_rate = 0.001
sell_factor = 1
target_profit = 0.0035
max_capital_per_trade_percent = 0.15
base_usd_per_trade = 10
max_open_positions = 150
use_dynamic_capital = true
working_capital_percentage = 0.85
# Kept for legacy, but new formula logic will override
use_percentage_based_sizing = true
# Kept for legacy
order_size_free_cash_percentage = 0.004

# -- Dynamic Formula Sizing --
# A more advanced, exponential sizing model. If enabled, it overrides the simple percentage sizing.
use_formula_sizing = true
# Minimum percentage of free cash to use (e.g., 0.4%)
min_order_percentage = 0.004
# Maximum percentage of free cash to use (e.g., 2.0%)
max_order_percentage = 0.02
# Controls how aggressively the percentage grows with portfolio size
log_scaling_factor = 0.002

# -- Reversal Buy Strategy --
use_reversal_buy_strategy = true
reversal_buy_threshold_percent = 0.005
reversal_monitoring_timeout_seconds = 100

[BACKTEST]
initial_balance = 100
commission_fee = 0.1
default_lookback_days = 10

[DATA]
historical_data_bucket = btc_data

[APP]
symbol = BTCUSDT
force_offline_mode = false
use_testnet = true
equity_recalculation_interval = 300

[DATA_PIPELINE]
future_periods = 60
profit_mult = 4.0
stop_mult = 1.5
regime_features = ["atr_14", "macd_diff_12_26_9", "rsi_14"]
regime_rolling_window = 72
start_date_ingestion = 2023-01-01

[TRADING_STRATEGY]
name = default_strategy
min_trade_size_usdt = 10.0
max_trade_size_usdt = 10000.0

[DATA_PATHS]
historical_data_file = data/input/history/BTCUSDT-1m-data.csv
macro_data_dir = data/input/macro
models_dir = data/models

[API]
port = 8765
measurement = price_data
update_interval = 5

# ==============================================================================
# REGIME-BASED STRATEGY PARAMETERS
# ==============================================================================
# These sections define the strategy parameters for different market regimes
# as identified by the SituationalAwareness model.
#
# Regime 0: Low Volatility / Ranging Market (Conservative)
# Regime 1: Moderate Uptrend (Balanced)
# Regime 2: High Volatility / Strong Trend (Aggressive)
# Regime 3: Downtrend / Cautious (Very Conservative)
# ==============================================================================

[REGIME_0]
target_profit = 0.005
buy_dip_percentage = 0.003
sell_rise_percentage = 0.001
order_size_usd = 10

[REGIME_1]
target_profit = 0.01
buy_dip_percentage = 0.003
sell_rise_percentage = 0.008
order_size_usd = 10

[REGIME_2]
target_profit = 0.02
buy_dip_percentage = 0.01
sell_rise_percentage = 0.006
order_size_usd = 10

[REGIME_3]
target_profit = 0.0025
buy_dip_percentage = 0.007
sell_rise_percentage = 0.0025
order_size_usd = 10
