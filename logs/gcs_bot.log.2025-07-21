2025-07-21 22:43:35,741 - gcsBot - INFO - Logger configurado para o modo: ''. Logs de console a partir do n√≠vel INFO.
2025-07-21 22:43:35,817 - gcsBot - INFO - --- MODO: OTIMIZA√á√ÉO WALK-FORWARD ---
2025-07-21 22:43:35,818 - gcsBot - INFO - Iniciando o processo de otimiza√ß√£o para encontrar os melhores par√¢metros...
2025-07-21 22:43:37,328 - gcsBot - ERROR - Um erro cr√≠tico encerrou a aplica√ß√£o: 'Settings' object has no attribute 'DATA_DIR'
Traceback (most recent call last):
  File "/app/main.py", line 68, in <module>
    main()
  File "/app/main.py", line 22, in main
    from src.core.optimizer import WalkForwardOptimizer
  File "/app/src/core/optimizer.py", line 26, in <module>
    OPTIMIZER_STATUS_FILE = os.path.join(settings.DATA_DIR, 'optimizer_status.json')
                                         ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/dynaconf/base.py", line 145, in __getattr__
    value = getattr(self._wrapped, name)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/dynaconf/base.py", line 328, in __getattribute__
    return super().__getattribute__(name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Settings' object has no attribute 'DATA_DIR'
2025-07-21 23:42:03,702 - gcsBot - INFO - Logger configurado para o modo: ''. Logs de console a partir do n√≠vel INFO.
2025-07-21 23:42:03,764 - gcsBot - INFO - --- MODO: OTIMIZA√á√ÉO WALK-FORWARD ---
2025-07-21 23:42:03,764 - gcsBot - INFO - Iniciando o processo de otimiza√ß√£o para encontrar os melhores par√¢metros...
2025-07-21 23:42:07,557 - gcsBot - INFO - Cliente Binance inicializado em modo REAL. Conex√£o com a API confirmada.
2025-07-21 23:42:07,558 - gcsBot - INFO - Iniciando processo de unifica√ß√£o de dados.
2025-07-21 23:42:07,558 - gcsBot - INFO - Iniciando verifica√ß√£o e atualiza√ß√£o dos dados macro...
2025-07-21 23:42:07,586 - gcsBot - INFO - Table 'macro_dxy' created successfully.
2025-07-21 23:42:07,587 - gcsBot - INFO - Dados macro para 'dxy' j√° est√£o atualizados.
2025-07-21 23:42:07,588 - gcsBot - INFO - Table 'macro_gold' created successfully.
2025-07-21 23:42:07,589 - gcsBot - INFO - Dados macro para 'gold' j√° est√£o atualizados.
2025-07-21 23:42:07,591 - gcsBot - INFO - Table 'macro_tnx' created successfully.
2025-07-21 23:42:07,592 - gcsBot - INFO - Dados macro para 'tnx' j√° est√£o atualizados.
2025-07-21 23:42:07,593 - gcsBot - INFO - Table 'macro_vix' created successfully.
2025-07-21 23:42:07,594 - gcsBot - INFO - Dados macro para 'vix' j√° est√£o atualizados.
2025-07-21 23:42:07,595 - gcsBot - DEBUG - Verifica√ß√£o de dados macro conclu√≠da.
2025-07-21 23:42:07,595 - gcsBot - INFO - Iniciando verifica√ß√£o e atualiza√ß√£o do sentimento do Twitter...
2025-07-21 23:42:07,606 - gcsBot - INFO - Table 'twitter_sentiment' created successfully.
2025-07-21 23:42:07,623 - gcsBot - INFO - Dataframe inserted into 'twitter_sentiment' successfully.
2025-07-21 23:42:07,623 - gcsBot - DEBUG - Verifica√ß√£o do sentimento do Twitter conclu√≠da.
2025-07-21 23:42:07,625 - gcsBot - INFO - Table 'btc_btc_usdt_1m' created successfully.
2025-07-21 23:42:09,500 - gcsBot - INFO - Dados do BTC no banco de dados est√£o desatualizados. Buscando novos dados da Binance...
2025-07-21 23:42:10,304 - gcsBot - INFO - Dataframe inserted into 'btc_btc_usdt_1m' successfully.
2025-07-21 23:42:10,354 - gcsBot - INFO - SUCESSO: Banco de dados do BTC atualizado com 11 novas velas.
2025-07-21 23:42:10,354 - gcsBot - DEBUG - Padronizando e unificando dados macro do banco de dados...
2025-07-21 23:42:10,385 - gcsBot - DEBUG - Dados macro do banco de dados unificados com sucesso.
2025-07-21 23:42:10,455 - gcsBot - INFO - Iniciando prepara√ß√£o de todas as features e indicadores t√©cnicos...
2025-07-21 23:42:20,902 - gcsBot - DEBUG - Calculando su√≠te de correla√ß√µes macro (BTC vs DXY, BTC vs VIX)...
2025-07-21 23:42:20,968 - gcsBot - DEBUG - C√°lculo bruto das features conclu√≠do.
2025-07-21 23:42:20,968 - gcsBot - INFO - Calculando regimes de mercado (Camada 2: Tend√™ncia + Volatilidade)...
2025-07-21 23:42:21,017 - gcsBot - DEBUG - Regimes de mercado calculados.
2025-07-21 23:42:21,194 - gcsBot - INFO - Clustering data into 10 market situations...
2025-07-21 23:42:26,263 - gcsBot - INFO - Clustering complete.
2025-07-21 23:42:26,266 - gcsBot - INFO - Calculando features de intera√ß√£o (Camada 3: T√°tica Avan√ßada)...
2025-07-21 23:42:26,531 - gcsBot - INFO - Filtrando dados de 2017 em diante e tratando valores ausentes/infinitos...
2025-07-21 23:42:26,681 - gcsBot - INFO - Aplicando shift(1) nas features para evitar lookahead bias...
2025-07-21 23:42:26,985 - gcsBot - DEBUG - Otimizando uso de mem√≥ria do DataFrame...
2025-07-21 23:42:26,993 - gcsBot - DEBUG - Otimiza√ß√£o de mem√≥ria conclu√≠da.
2025-07-21 23:42:26,993 - gcsBot - INFO - Processo de coleta e prepara√ß√£o de dados conclu√≠do com sucesso.
2025-07-21 23:42:26,998 - gcsBot - ERROR - N√£o foram encontrados dados hist√≥ricos para a otimiza√ß√£o. Verifique a conex√£o ou os arquivos locais. Abortando.
2025-07-21 23:57:12,513 - gcsBot - INFO - Logger configurado para o modo: ''. Logs de console a partir do n√≠vel INFO.
2025-07-21 23:57:12,579 - gcsBot - INFO - --- MODO: OTIMIZA√á√ÉO WALK-FORWARD ---
2025-07-21 23:57:12,579 - gcsBot - INFO - Iniciando o processo de otimiza√ß√£o para encontrar os melhores par√¢metros...
2025-07-21 23:57:16,356 - gcsBot - INFO - Cliente Binance inicializado em modo REAL. Conex√£o com a API confirmada.
2025-07-21 23:57:16,356 - gcsBot - INFO - Iniciando processo de unifica√ß√£o de dados.
2025-07-21 23:57:16,357 - gcsBot - INFO - Iniciando verifica√ß√£o e atualiza√ß√£o dos dados macro...
2025-07-21 23:57:16,385 - gcsBot - INFO - Table 'macro_dxy' created successfully.
2025-07-21 23:57:16,387 - gcsBot - INFO - Dados macro para 'dxy' j√° est√£o atualizados.
2025-07-21 23:57:16,388 - gcsBot - INFO - Table 'macro_gold' created successfully.
2025-07-21 23:57:16,390 - gcsBot - INFO - Dados macro para 'gold' j√° est√£o atualizados.
2025-07-21 23:57:16,390 - gcsBot - INFO - Table 'macro_tnx' created successfully.
2025-07-21 23:57:16,392 - gcsBot - INFO - Dados macro para 'tnx' j√° est√£o atualizados.
2025-07-21 23:57:16,393 - gcsBot - INFO - Table 'macro_vix' created successfully.
2025-07-21 23:57:16,395 - gcsBot - INFO - Dados macro para 'vix' j√° est√£o atualizados.
2025-07-21 23:57:16,395 - gcsBot - DEBUG - Verifica√ß√£o de dados macro conclu√≠da.
2025-07-21 23:57:16,396 - gcsBot - INFO - Iniciando verifica√ß√£o e atualiza√ß√£o do sentimento do Twitter...
2025-07-21 23:57:16,407 - gcsBot - INFO - Table 'twitter_sentiment' created successfully.
2025-07-21 23:57:16,426 - gcsBot - INFO - Dataframe inserted into 'twitter_sentiment' successfully.
2025-07-21 23:57:16,426 - gcsBot - DEBUG - Verifica√ß√£o do sentimento do Twitter conclu√≠da.
2025-07-21 23:57:16,428 - gcsBot - INFO - Table 'btc_btc_usdt_1m' created successfully.
2025-07-21 23:57:18,387 - gcsBot - INFO - Dados do BTC no banco de dados est√£o desatualizados. Buscando novos dados da Binance...
2025-07-21 23:57:19,187 - gcsBot - INFO - Dataframe inserted into 'btc_btc_usdt_1m' successfully.
2025-07-21 23:57:19,245 - gcsBot - INFO - SUCESSO: Banco de dados do BTC atualizado com 16 novas velas.
2025-07-21 23:57:19,246 - gcsBot - DEBUG - Padronizando e unificando dados macro do banco de dados...
2025-07-21 23:57:19,282 - gcsBot - DEBUG - Dados macro do banco de dados unificados com sucesso.
2025-07-21 23:57:19,360 - gcsBot - INFO - Iniciando prepara√ß√£o de todas as features e indicadores t√©cnicos...
2025-07-21 23:57:29,459 - gcsBot - DEBUG - Calculando su√≠te de correla√ß√µes macro (BTC vs DXY, BTC vs VIX)...
2025-07-21 23:57:29,537 - gcsBot - DEBUG - C√°lculo bruto das features conclu√≠do.
2025-07-21 23:57:29,537 - gcsBot - INFO - Calculando regimes de mercado (Camada 2: Tend√™ncia + Volatilidade)...
2025-07-21 23:57:29,585 - gcsBot - DEBUG - Regimes de mercado calculados.
2025-07-21 23:57:29,785 - gcsBot - INFO - Clustering data into 10 market situations...
2025-07-21 23:57:35,624 - gcsBot - INFO - Clustering complete.
2025-07-21 23:57:35,627 - gcsBot - INFO - Calculando features de intera√ß√£o (Camada 3: T√°tica Avan√ßada)...
2025-07-21 23:57:35,877 - gcsBot - INFO - Filtrando dados de 2017 em diante e tratando valores ausentes/infinitos...
2025-07-21 23:57:36,027 - gcsBot - INFO - Aplicando shift(1) nas features para evitar lookahead bias...
2025-07-21 23:57:36,348 - gcsBot - DEBUG - Otimizando uso de mem√≥ria do DataFrame...
2025-07-21 23:57:36,457 - gcsBot - DEBUG - Otimiza√ß√£o de mem√≥ria conclu√≠da.
2025-07-21 23:57:36,458 - gcsBot - INFO - Processo de coleta e prepara√ß√£o de dados conclu√≠do com sucesso.
2025-07-21 23:57:36,460 - gcsBot - INFO - 
================================================================================
--- üöÄ INICIANDO PROCESSO DE OTIMIZA√á√ÉO (V9.0) üöÄ ---
================================================================================
2025-07-21 23:57:36,460 - gcsBot - INFO - Training base model...
2025-07-21 23:57:37,205 - gcsBot - INFO - Treinando modelo com 34 features.
2025-07-21 23:57:37,209 - gcsBot - INFO - 
--- Distribui√ß√£o dos Labels no Treino ---
‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ    ‚îÉ   Label ‚îÉ   Frequ√™ncia ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ  0 ‚îÉ       0 ‚îÉ     0.515022 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ  1 ‚îÉ       1 ‚îÉ     0.484978 ‚îÉ
‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îª‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îª‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ
2025-07-21 23:57:47,160 - gcsBot - INFO - Base model trained.
2025-07-21 23:57:47,212 - gcsBot - INFO - Dados insuficientes para a situa√ß√£o 2.0. Pulando.
2025-07-21 23:57:47,212 - gcsBot - INFO - Dados insuficientes para a situa√ß√£o 6.0. Pulando.
2025-07-21 23:57:47,213 - gcsBot - INFO - Dados insuficientes para a situa√ß√£o 9.0. Pulando.
2025-07-21 23:57:47,213 - gcsBot - INFO - 
--- Plano Mestre de Otimiza√ß√£o ---
‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ   Situa√ß√£o a Treinar ‚îÉ   Qtd. Velas ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_0.0 ‚îÉ        34510 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_1.0 ‚îÉ        54707 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_3.0 ‚îÉ        50809 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_4.0 ‚îÉ        19373 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_5.0 ‚îÉ         8854 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_7.0 ‚îÉ        16021 ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïã‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ        SITUATION_8.0 ‚îÉ        69700 ‚îÉ
‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îª‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ
2025-07-21 23:57:47,213 - gcsBot - INFO - 
==================== Iniciando otimiza√ß√£o para: SITUATION_0.0 (34510 velas) ====================
2025-07-21 23:57:47,216 - gcsBot - ERROR - Um erro cr√≠tico encerrou a aplica√ß√£o: 
Could not find `optuna-integration` for `lightgbm`.
Please run `pip install optuna-integration[lightgbm]`.
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/optuna/integration/lightgbm.py", line 11, in <module>
    import optuna_integration.lightgbm as lgb
ModuleNotFoundError: No module named 'optuna_integration'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/optuna/integration/__init__.py", line 132, in _get_module
    return importlib.import_module("." + module_name, self.__name__)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 999, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/usr/local/lib/python3.12/site-packages/optuna/integration/lightgbm.py", line 13, in <module>
    raise ModuleNotFoundError(_INTEGRATION_IMPORT_ERROR_TEMPLATE.format("lightgbm"))
ModuleNotFoundError: 
Could not find `optuna-integration` for `lightgbm`.
Please run `pip install optuna-integration[lightgbm]`.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/main.py", line 68, in <module>
    main()
  File "/app/main.py", line 36, in main
    optimizer.run()
  File "/app/src/core/optimizer.py", line 311, in run
    self.run_optimization_for_situation(name, data)
  File "/app/src/core/optimizer.py", line 222, in run_optimization_for_situation
    tuner = optuna.integration.LightGBMTuner(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/optuna/integration/__init__.py", line 120, in __getattr__
    module = self._get_module(self._class_to_module[name])
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/optuna/integration/__init__.py", line 134, in _get_module
    raise ModuleNotFoundError(_INTEGRATION_IMPORT_ERROR_TEMPLATE.format(module_name))
ModuleNotFoundError: 
Could not find `optuna-integration` for `lightgbm`.
Please run `pip install optuna-integration[lightgbm]`.
